# INTRODUÇÃO 

Esse documento tem como objetivo registrar de como funciona o ambiente de desenvolvimento do codespace!


## Como funciona o ambiente codespace?

GitHub Codespaces é uma funcionalidade do GitHub que permite criar ambientes de desenvolvimento totalmente funcionais e baseados em nuvem, diretamente integrados ao repositório. Esses ambientes rodam em contêineres Docker em servidores do GitHub, e já vêm com o Visual Studio Code (VSCode) embutido no navegador ou disponível para conexão local.

Obs.: Seu sistema operacional é o Linux


Vantagens:

- Nenhuma configuração local.
- Ambiente reproduzível por qualquer colaborador.
- Ideal para times, freelancers e projetos de software.

##  Conceito de Dev Container

O Dev Container é o núcleo de um Codespace. Ele define o ambiente de desenvolvimento via:

Imagem base (ex: Node, Python, Java)

Comandos de setup (ex: instalação de pacotes)

Ferramentas, extensões do VSCode

Recursos do sistema (ex: PostgreSQL, Docker)

**Ele é definido com um arquivo chamado devcontainer.json dentro de uma pasta chamada .devcontainer/.**

## Estrutura de Arquivos no Projeto

📁 nosso-projeto/
├── 📁 .devcontainer/
│   ├── devcontainer.json
│   └── (opcional) Dockerfile
├── package.json / requirements.txt / pom.xml etc.
└── ... (resto dos módulos, códigos, pastas, sub-pastas)


## Sintaxe do devcontainer.json

O devcontainer.json é um arquivo de configuração usado principalmente no Visual Studio Code (VS Code) para definir um ambiente de desenvolvimento baseado em contêineres Docker. Ele faz parte da funcionalidade chamada Dev Containers, que permite que você desenvolva dentro de um contêiner com todas as ferramentas, dependências e configurações necessárias já prontas.

**Exemplo:**

{
  "name": "NodeJS Workspace",             // Nome do seu ambiente
  "image": "mcr.microsoft.com/devcontainers/javascript-node:18", // Imagem base
  "features": {},                         // Adiciona extras (como PostgreSQL)
  "postCreateCommand": "npm install",     // Comando a rodar após setup
  "customizations": {
    "vscode": {
      "extensions": [                     // Extensões sugeridas do VSCode
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode"
      ]
    }
  },
  "forwardPorts": [3000],                 // Portas abertas no ambiente
  "mounts": [],                           // Para montar volumes externos
  "remoteUser": "vscode"                  // Usuário padrão do container
}

**Exemplo mais detalhado:**

{
  "name": "Python Backend",
  "image": "mcr.microsoft.com/devcontainers/python:3.11",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {},
    "ghcr.io/devcontainers/features/postgres:1": {
      "version": "15",
      "database": "meubanco",
      "user": "meuusuario",
      "password": "minhasenha"
    }
  },
  "postCreateCommand": "pip install -r requirements.txt",
  "forwardPorts": [8000, 5432],
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-toolsai.jupyter",
        "batisteo.vscode-django"
      ]
    }
  }
}


## Usando Dockerfile personalizado (Opcional)

esse arquivo é opcional colocar, porém é subar interessante saber como funciona! 

Um Dockerfile é um arquivo de texto que contém instruções passo a passo para construir uma imagem Docker personalizada. Ele define o sistema operacional base, ferramentas, bibliotecas e configurações que seu contêiner vai ter.

- Como ele se conecta ao devcontainer.json?

No devcontainer.json, você substitui a propriedade "image" por uma configuração de build com o caminho para o Dockerfile. Exemplo:

{
  "name": "Ambiente com Dockerfile",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "postCreateCommand": "npm install",
  "forwardPorts": [3000]
}

Nosso Dockerfile de exemplo .devcontainer/Dockerfile:

FROM node:18

//Cria diretório de trabalho

WORKDIR /app

// Copia o conteúdo do projeto

COPY . .

// Instala dependências do sistema

RUN apt-get update && apt-get install -y python3

// Instala dependências do projeto

RUN npm install


## Como iniciar o Codespace

Após adicionar o .devcontainer, vá no seu repositório:

- Acesse o repositório no GitHub

- Clique em Code → aba Codespaces

- Clique em Create codespace on <branch>

O GitHub vai:

- Criar um container baseado nas instruções

- Instalar o VSCode com as extensões sugeridas

- Rodar postCreateCommand

- Expor as portas indicadas

## Recursos avançados


| Recurso              | Descrição                                                                 |
|----------------------|---------------------------------------------------------------------------|
| updateContentCommand | Roda sempre que o conteúdo do container muda                             |
| mounts               | Monta volumes como repositórios privados ou chaves                       |
| remoteEnv            | Injeta variáveis de ambiente seguras                                     |
| onCreateCommand      | Roda antes de instalar extensões e executar o postCreateCommand          |


## Boas práticas

Sempre use imagens oficiais ou Dockerfile bem definido

Inclua um README com instruções para colaboradores

Utilize features sempre que possível (menos bugs e mais consistência)

Exporte apenas as portas necessárias

Faça testes locais com Dev Containers CLI -> https://github.com/devcontainers/cli -> se quiser debugar sem Codespace

## CRIANDO AMBIENTE DE DESENVOLVIMENTO BACK-END + DOCKER + POSTGRES + CODESPACE



