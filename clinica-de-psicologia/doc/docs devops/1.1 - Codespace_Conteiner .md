# INTRODUÃ‡ÃƒO 

Esse documento tem como objetivo registrar de como funciona o ambiente de desenvolvimento do codespace!


## Como funciona o ambiente codespace?

GitHub Codespaces Ã© uma funcionalidade do GitHub que permite criar ambientes de desenvolvimento totalmente funcionais e baseados em nuvem, diretamente integrados ao repositÃ³rio. Esses ambientes rodam em contÃªineres Docker em servidores do GitHub, e jÃ¡ vÃªm com o Visual Studio Code (VSCode) embutido no navegador ou disponÃ­vel para conexÃ£o local.

Obs.: Seu sistema operacional Ã© o Linux


Vantagens:

- Nenhuma configuraÃ§Ã£o local.
- Ambiente reproduzÃ­vel por qualquer colaborador.
- Ideal para times, freelancers e projetos de software.

##  Conceito de Dev Container

O Dev Container Ã© o nÃºcleo de um Codespace. Ele define o ambiente de desenvolvimento via:

Imagem base (ex: Node, Python, Java)

Comandos de setup (ex: instalaÃ§Ã£o de pacotes)

Ferramentas, extensÃµes do VSCode

Recursos do sistema (ex: PostgreSQL, Docker)

**Ele Ã© definido com um arquivo chamado devcontainer.json dentro de uma pasta chamada .devcontainer/.**

## Estrutura de Arquivos no Projeto

ğŸ“ nosso-projeto/
â”œâ”€â”€ ğŸ“ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â””â”€â”€ (opcional) Dockerfile
â”œâ”€â”€ package.json / requirements.txt / pom.xml etc.
â””â”€â”€ ... (resto dos mÃ³dulos, cÃ³digos, pastas, sub-pastas)


## Sintaxe do devcontainer.json

O devcontainer.json Ã© um arquivo de configuraÃ§Ã£o usado principalmente no Visual Studio Code (VS Code) para definir um ambiente de desenvolvimento baseado em contÃªineres Docker. Ele faz parte da funcionalidade chamada Dev Containers, que permite que vocÃª desenvolva dentro de um contÃªiner com todas as ferramentas, dependÃªncias e configuraÃ§Ãµes necessÃ¡rias jÃ¡ prontas.

**Exemplo:**

{
  "name": "NodeJS Workspace",             // Nome do seu ambiente
  "image": "mcr.microsoft.com/devcontainers/javascript-node:18", // Imagem base
  "features": {},                         // Adiciona extras (como PostgreSQL)
  "postCreateCommand": "npm install",     // Comando a rodar apÃ³s setup
  "customizations": {
    "vscode": {
      "extensions": [                     // ExtensÃµes sugeridas do VSCode
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode"
      ]
    }
  },
  "forwardPorts": [3000],                 // Portas abertas no ambiente
  "mounts": [],                           // Para montar volumes externos
  "remoteUser": "vscode"                  // UsuÃ¡rio padrÃ£o do container
}

**Exemplo mais detalhado:**

{
  "name": "Python Backend",
  "image": "mcr.microsoft.com/devcontainers/python:3.11",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {},
    "ghcr.io/devcontainers/features/postgres:1": {
      "version": "15",
      "database": "meubanco",
      "user": "meuusuario",
      "password": "minhasenha"
    }
  },
  "postCreateCommand": "pip install -r requirements.txt",
  "forwardPorts": [8000, 5432],
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-toolsai.jupyter",
        "batisteo.vscode-django"
      ]
    }
  }
}


## Usando Dockerfile personalizado (Opcional)

esse arquivo Ã© opcional colocar, porÃ©m Ã© subar interessante saber como funciona! 

Um Dockerfile Ã© um arquivo de texto que contÃ©m instruÃ§Ãµes passo a passo para construir uma imagem Docker personalizada. Ele define o sistema operacional base, ferramentas, bibliotecas e configuraÃ§Ãµes que seu contÃªiner vai ter.

- Como ele se conecta ao devcontainer.json?

No devcontainer.json, vocÃª substitui a propriedade "image" por uma configuraÃ§Ã£o de build com o caminho para o Dockerfile. Exemplo:

{
  "name": "Ambiente com Dockerfile",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "postCreateCommand": "npm install",
  "forwardPorts": [3000]
}

Nosso Dockerfile de exemplo .devcontainer/Dockerfile:

FROM node:18

//Cria diretÃ³rio de trabalho

WORKDIR /app

// Copia o conteÃºdo do projeto

COPY . .

// Instala dependÃªncias do sistema

RUN apt-get update && apt-get install -y python3

// Instala dependÃªncias do projeto

RUN npm install


## Como iniciar o Codespace

ApÃ³s adicionar o .devcontainer, vÃ¡ no seu repositÃ³rio:

- Acesse o repositÃ³rio no GitHub

- Clique em Code â†’ aba Codespaces

- Clique em Create codespace on <branch>

O GitHub vai:

- Criar um container baseado nas instruÃ§Ãµes

- Instalar o VSCode com as extensÃµes sugeridas

- Rodar postCreateCommand

- Expor as portas indicadas

## Recursos avanÃ§ados


| Recurso              | DescriÃ§Ã£o                                                                 |
|----------------------|---------------------------------------------------------------------------|
| updateContentCommand | Roda sempre que o conteÃºdo do container muda                             |
| mounts               | Monta volumes como repositÃ³rios privados ou chaves                       |
| remoteEnv            | Injeta variÃ¡veis de ambiente seguras                                     |
| onCreateCommand      | Roda antes de instalar extensÃµes e executar o postCreateCommand          |


## Boas prÃ¡ticas

Sempre use imagens oficiais ou Dockerfile bem definido

Inclua um README com instruÃ§Ãµes para colaboradores

Utilize features sempre que possÃ­vel (menos bugs e mais consistÃªncia)

Exporte apenas as portas necessÃ¡rias

FaÃ§a testes locais com Dev Containers CLI -> https://github.com/devcontainers/cli -> se quiser debugar sem Codespace

## CRIANDO AMBIENTE DE DESENVOLVIMENTO BACK-END + DOCKER + POSTGRES + CODESPACE



